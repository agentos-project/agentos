{% extends "base.html" %}

{% block head_title %}
  AgentOS Leaderboard
{% endblock head_title %}

{% block container %}
  <div class='title'>AgentOS Environment Leaderboard</div>
{% endblock container %}

{% block content %}

  <div class="content">

    {% if env_dict %}
      {% for env, run_list in env_dict.items %}
        <h4>
          <a href="{% url 'component-detail' env.identifier %}">
            {{ env.class_name }}
            <span style="font-size:0.75em">(Env ID: {{ env.identifier }})</span>
          </a>
        </h4>
          <ul>
            {% for run in run_list %}
              <li>
                <a href="{% url 'run-detail' run.identifier %}">
                  {% for k, v in run.data.tags.items %}
                    {% if k == "mlflow.runName" %}
                        {{ v }}
                    {% endif %}
                  {% endfor %}
                  <span style="font-size:0.75em">(Run ID: {{ run.identifier }})</span>
                </a>
                <ul>
                  {%  for metric_name, metric_val in run.data.metrics.items %}
                    {% if metric_name == "episode_count" or metric_name == "mean_reward" %}
                      <li>{{ metric_name }}: {{ metric_val }} </li>
                    {% endif %}
                  {% endfor %}
                </ul>
              </li>
              {%  endfor %}
          </ul>
      {% endfor %}
    {% else %}
      <p>No Environments are available.</p>
    {% endif %}
  </div>
{% endblock content %}
